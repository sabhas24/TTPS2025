<app-home-header></app-home-header>

<main class="mis-mascotas-page">
  <h1>Mis Mascotas</h1>

  <!-- Estado de carga -->
  <div *ngIf="cargando">Cargando...</div>

  <!-- Error global -->
  <div *ngIf="error" class="error-message-global">{{ error }}</div>

  <!-- Contenido principal -->
  <div *ngIf="!cargando && !error">

    <!-- Si no hay mascotas -->
    <div *ngIf="mascotasPaginadas.length === 0" class="no-mascotas">
      <p>No tienes mascotas registradas.</p>
    </div>

    <!-- Lista de mascotas -->
    <div *ngIf="mascotasPaginadas.length > 0" class="mascotas-list">

      <div *ngFor="let mascota of mascotasPaginadas" class="mascota-card">

        <!-- Imagen segura -->
        <img
          [src]="mascota.fotos && mascota.fotos.length > 0 ? mascota.fotos[0] : 'assets/no-image.png'"
          alt="{{ mascota.nombre }}"
        />

        <div class="info">
          <h3>{{ mascota.nombre }}</h3>

          <p>Barrio: {{ mascota.coordenada?.barrio || 'No definido' }}</p>
          <p>Color: {{ mascota.color }}</p>
          <p>{{ mascota.descripcionExtra }}</p>

          <button (click)="editarMascota(mascota.id)">Editar</button>
          <button (click)="eliminarMascota(mascota.id)">Eliminar</button>
        </div>

      </div>
    </div>

    <!-- Controles de paginaciÃ³n -->
    <div class="paginacion" *ngIf="totalPaginas > 1">

      <button
        class="btn-pag"
        (click)="paginaAnterior()"
        [disabled]="paginaActual === 1">
        &laquo; Anterior
      </button>

      <ng-container *ngFor="let p of paginasArray()">
        <button
          class="btn-pag"
          [class.active]="p === paginaActual"
          (click)="irAPagina(p)">
          {{ p }}
        </button>
      </ng-container>

      <button
        class="btn-pag"
        (click)="siguientePagina()"
        [disabled]="paginaActual === totalPaginas">
        Siguiente &raquo;
      </button>

    </div>

  </div>
</main>

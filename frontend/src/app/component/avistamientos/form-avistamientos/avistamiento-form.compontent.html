<div class="container mt-4">
  <h2>{{ editando ? 'Editar' : 'Nuevo' }} Avistamiento</h2>

  <form [formGroup]="form" (ngSubmit)="guardar()">
    
    <div class="row mb-3">
      <div class="col-md-6">
        <label class="form-label">Mascota</label>
        <input type="text" class="form-control bg-light" [value]="nombreMascota" readonly>
      </div>
      <div class="col-md-6">
        <label class="form-label">Avistamiento reportado por</label>
        <input type="text" class="form-control bg-light" [value]="nombreUsuario" readonly>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Fecha y Hora del avistamiento</label>
      <input type="datetime-local" class="form-control" formControlName="fecha">
    </div>

    <div class="mb-3">
      <label class="form-label">Comentario</label>
      <textarea class="form-control" formControlName="comentario"></textarea>
    </div>

    <div class="mb-3 form-check">
      <input type="checkbox" class="form-check-input" formControlName="enPosesion" />
      <label class="form-check-label">En posesión</label>
    </div>

    <div class="row">
      <div class="col">
        <label class="form-label">Latitud</label>
        <input type="number" class="form-control" formControlName="coordenadaLat" />
      </div>
      <div class="col">
        <label class="form-label">Longitud</label>
        <input type="number" class="form-control" formControlName="coordenadaLng" />
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label"><b>Fotos del avistamiento</b></label>
      <input type="file" class="form-control" multiple (change)="onFotoSeleccionada($event)" accept="image/*" />
      <small class="text-muted">Podés seleccionar varias fotos.</small>
    </div>

    <div class="d-flex flex-wrap mb-3" *ngIf="fotosBase64.length > 0">
      <div *ngFor="let foto of fotosBase64; let i = index" class="position-relative m-2">
        <img [src]="foto" class="img-thumbnail" style="width: 100px; height: 100px; object-fit: cover;">
        <button type="button" class="btn btn-danger btn-sm position-absolute top-0 end-0" (click)="eliminarFoto(i)">
          ×
        </button>
      </div>
    </div>




    <div class="mt-4">
      <button type="submit" class="btn btn-success me-2">Guardar</button>
      <button type="button" class="btn btn-secondary" (click)="volver()">Cancelar</button>
    </div>
  </form>
</div>